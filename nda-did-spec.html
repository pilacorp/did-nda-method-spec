<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DID:NDA Method Specification for the NDA Chain Verifiable Data Registry">
  <title>The did:nda Method Specification - NDAChain</title>
  <style>
    /* Base styles */
    :root {
      --primary-color: #1e3a8a;
      --secondary-color: #3b82f6;
      --accent-color: #3b82f6;
      --text-color: #1f2937;
      --light-text: #6b7280;
      --border-color: #e5e7eb;
      --background: #f9fafb;
      --card-bg: #ffffff;
      --code-bg: #f3f4f6;
      --code-border: #d1d5db;
      --pre-bg: #1e293b;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --primary-gradient: linear-gradient(135deg, #dcdcdc 0%, var(--secondary-color) 100%);

    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.7;
      color: var(--text-color);
      background: var(--background);
    }

    /* Layout components */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .top-bar {
      background: var(--primary-gradient);
      padding: 14px 0;
      font-size: 0.875rem;
      text-align: center;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    header {
      background: var(--primary-gradient);
      color: white;
      padding: 64px 24px;
      margin-bottom: 48px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.15) 0%, transparent 60%);
      pointer-events: none;
    }

    header .container {
      position: relative;
      z-index: 1;
    }

    .header-logo {
      margin-bottom: 24px;
      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
    }

    .header-code {
      background: rgba(255, 255, 255, 0.9);
      padding: 4px 12px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 0.95em;
      border: 1px solid rgba(30, 58, 138, 0.2);
      color: #1e3a8a;
    }

    .subtitle {
      font-size: 1.125rem;
      opacity: 0.85;
      font-weight: 400;
      margin-top: 12px;
      color: #1e3a8a;
    }

    .content {
      background: var(--card-bg);
      padding: 48px;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 4px 12px rgba(0, 0, 0, 0.03);
      margin-bottom: 32px;
    }

    /* Typography */
    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.025em;
      color: #1e3a8a;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    h2 {
      font-size: 1.875rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-top: 48px;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 3px solid var(--secondary-color);
      letter-spacing: -0.02em;
    }

    h2:first-child {
      margin-top: 0;
    }

    h3 {
      font-size: 1.375rem;
      font-weight: 600;
      color: var(--text-color);
      margin-top: 32px;
      margin-bottom: 16px;
    }

    h4 {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-color);
      margin-top: 24px;
      margin-bottom: 12px;
    }

    p {
      margin-bottom: 16px;
      color: var(--text-color);
    }

    a {
      color: var(--secondary-color);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    a:hover {
      color: var(--accent-color);
      text-decoration: underline;
    }

    /* Lists */
    ul, ol {
      margin: 20px 0;
      padding-left: 28px;
    }

    ul li, ol li {
      margin-bottom: 12px;
      color: var(--text-color);
      line-height: 1.7;
    }

    ul li strong, ol li strong {
      color: var(--primary-color);
      font-weight: 600;
    }

    /* Code formatting */
    code {
      background: var(--code-bg);
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875em;
      color: var(--primary-color);
      border: 1px solid var(--code-border);
      font-weight: 500;
    }

    pre {
      background: var(--pre-bg);
      color: #e2e8f0;
      padding: 24px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 24px 0;
      border: 1px solid #334155;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    pre code {
      background: none;
      color: inherit;
      padding: 0;
      border: none;
      font-size: 0.875rem;
      line-height: 1.6;
    }

    /* Info boxes */
    .info-box {
      background: #eff6ff;
      border-left: 4px solid var(--secondary-color);
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }

    .warning-box {
      background: #fffbeb;
      border-left: 4px solid var(--warning-color);
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }

    .success-box {
      background: #f0fdf4;
      border-left: 4px solid var(--success-color);
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }

    /* Section spacing */
    .content > h2 + p,
    .content > h2 + ul,
    .content > h2 + ol {
      margin-top: 20px;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      h2 {
        font-size: 1.5rem;
        margin-top: 36px;
      }

      h3 {
        font-size: 1.25rem;
      }

      .content {
        padding: 32px 24px;
      }

      header {
        padding: 48px 24px;
      }

      .header-logo {
        width: 220px;
      }
    }

    @media (max-width: 480px) {
      .content {
        padding: 24px 20px;
      }

      pre {
        padding: 16px;
        font-size: 0.8rem;
      }

      .header-logo {
        width: 200px;
      }
    }

    /* Footer */
    footer {
      text-align: center;
      color: var(--light-text);
      padding: 32px 0;
      font-size: 0.875rem;
      border-top: 1px solid var(--border-color);
      margin-top: 48px;
    }
  </style>
</head>

<body>

  <header>
    <div class="container">
      <img src="https://s3-sgn10.fptcloud.com/cdn/logo/ndachain-full-logo.png" alt="NDA Chain Logo" class="header-logo"
        width="280" height="auto">
      <h1>The <code class="header-code">did:nda</code> Method Specification</h1>
      <p class="subtitle">A W3C DID Method for the NDA Chain Verifiable Data Registry</p>
    </div>
  </header>

  <main class="container">
    <div class="content">

      <h2>1. Introduction</h2>

      <p>The <code>did:nda</code> method identifies subjects (humans, organizations, or items) in the <strong>Verifiable
          Data Registry (VDR)</strong> powered by the <strong>NDA Chain blockchain</strong>. It is a hybrid architecture
        designed to provide secure, verifiable, and portable digital identities.</p>

      <p>This system follows W3C DID standards, leveraging the NDA Chain's on-chain smart contract to certify the
        issuance of the DID on the NDAChain blockchain network. The Verifiable Data Registry (VDR) acts as the trusted
        off-chain storage for richer DID Documents. This hybrid approach balances decentralization with practical
        governance and scalability.</p>

      <p>Resolution is handled by a dedicated resolver service, ensuring that DID Documents are retrievable without
        querying the blockchain directly for all data, which enhances privacy and efficiency.</p>

      <h2>2. DID Method Name</h2>

      <p>The registered method is <code>nda</code>.</p>

      <p>A valid DID starts with:</p>

      <pre><code>did:nda:</code></pre>

      <h2>3. DID Syntax</h2>

      <p>A <code>did:nda</code> DID is formed by the method prefix and a unique identifier derived from an NDA Chain
        blockchain address.</p>

      <h3>Regex:</h3>

      <pre><code>^did:nda:0x[0-9a-fA-F]{40}$</code></pre>

      <h3>ABNF:</h3>

      <pre><code>did-nda              = "did:nda:" method-specific-id
method-specific-id   = "0x" 40*HEXDIG
HEXDIG               = DIGIT / "a" / "b" / "c" / "d" / "e" / "f" / "A" / "B" / "C" / "D" / "E" / "F"
DIGIT                = %x30-39</code></pre>

      <h2>4. Method Operations (CRUD)</h2>

      <p>This method supports <strong>Create</strong>, <strong>Read</strong>, and <strong>Update</strong> operations.</p>

      <h3>Create (Register)</h3>

      <p>The creation of a <code>did:nda</code> Decentralized Identifier involves two phases: <br/> First - generating the
        identifier and the initial document off-chain, <br/> Second - registering the DID on the NDAChain.</p>

      <h4>Phase 1: Off-Chain Generation (Identifier & Document)</h4>
      <p>A <code>did:nda</code> is implicitly created when a user generates a new ECDSA secp256k1 key pair. This process
        is performed entirely off-chain. The DID identifier is derived deterministically from the public key using
        standard Ethereum address generation logic.</p>

      <p><strong>The Derivation Algorithm:</strong></p>
      <ol>
        <li><strong>Generate Private Key:</strong> Create a cryptographically secure 32-byte private key.</li>
        <li><strong>Derive Public Key:</strong> Calculate the uncompressed public key (65 bytes, starting with
          <code>0x04</code>).</li>
        <li><strong>Hash:</strong> Apply the Keccak-256 hashing algorithm to the last 64 bytes of the public key.</li>
        <li><strong>Truncate:</strong> Take the last (lowest-order) 20 bytes of the resulting hash.</li>
        <li><strong>Address Generation (Encode):</strong> Convert these 20 bytes into a 42-character hexadecimal string.
          This string represents the <strong>Account Address</strong> and <strong>MUST include the <code>0x</code>
            prefix</strong> (e.g., <code>0x3f1a...</code>).</li>
        <li><strong>Format:</strong> Prepend <code>did:nda:</code> to the Account Address to form the final DID.</li>
      </ol>

      <div class="success-box">
        <p><strong>Example:</strong></p>
        <p>
          Account Address: <code>0x3f1a5c2e8b9d7f6a4c1b9e8d7c6b5a49382716f5</code><br>
          Final DID: <code>did:nda:0x3f1a5c2e8b9d7f6a4c1b9e8d7c6b5a49382716f5</code>
        </p>
      </div>

      <p><strong>Document Creation & Storage:</strong><br>
        The DID Document associated with the DID is generated locally. The document supports the
        <code>EcdsaSecp256k1VerificationKey2019</code> verification method. During the registration process, this
        Document is published to the Verifiable Data Registry (VDR) via the <strong>Register API</strong>. The Document
        is then stored in off-chain storage (VDR) and will be fetched from this location when resolving the DID.</p>

      <h4>Phase 2: On-Chain Registration</h4>
      <p>The issuance of the DID will be certified by the NDAChain blockchain network through the publishing of a DID
        registration transaction.</p>

      <p>The transaction contains the hash of the DID Document. This transaction must be signed by the private key
        corresponding to the DID, proving immediate control over the DID identifier. This transaction simultaneously
        anchors the DID's off-chain pointer to the chain.</p>

      <p>Once the registration transaction is confirmed on NDAChain, the DID is considered fully created and globally
        certified.</p>

      <h3>Read (Resolve)</h3>

      <p>A <code>did:nda</code> is resolved by querying the <strong>NDA DID Resolver service</strong>. The resolver
        fetches the DID Document associated with the DID from its off-chain storage (e.g., application cache, dedicated
        database) and returns it to the client. See Section 6 for resolution details.</p>

      <h3>Update (Replace)</h3>

      <p>DID Documents <strong>can be updated</strong>. The <code>controller</code> of the DID (who holds the associated
        private key) can authorize changes to the DID Document, such as rotating keys, adding or removing service
        endpoints, or modifying authentication methods. Updates are submitted to the DID Resolver service API and must
        be cryptographically signed by the controller to prove ownership.</p>

      <h3>Deactivate (Revoke)</h3>

      <p>Deactivation is achieved by performing an <strong>Update</strong> operation. The controller updates the DID
        Document to remove or revoke all <code>verificationMethod</code> and <code>service</code> entries. A DID
        Document can also be updated to point its <code>controller</code> to a "null" or un-ownable DID, effectively
        orphaning it.</p>

      <h2>5. Method-Specific Identifiers</h2>

      <p>The <code>did:nda</code> method-specific identifier is a <strong>blockchain address</strong> from the NDA
        Chain.</p>

      <ul>
        <li><strong>Allowed charset</strong>: digits <code>[0–9]</code>, lowercase letters <code>[a-f]</code>, uppercase
          letters <code>[A-F]</code>, and the prefix <code>0x</code>.</li>
        <li><strong>Length</strong>: 42 characters total (<code>0x</code> prefix + 40 hexadecimal characters).</li>
        <li><strong>Collision management</strong>: Uniqueness is guaranteed by the underlying blockchain's cryptographic
          address generation process.</li>
        <li><strong>Example</strong>: <code>did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828</code></li>
      </ul>

      <h2>6. DID Resolution</h2>

      <p>Resolution is performed via an HTTP GET request to the NDA DID Resolver service.</p>

      <h3>Reference Endpoint:</h3>

      <pre><code>GET https://resolver.ndadid.vn/1.0/identifiers/{did}</code></pre>

      <h3>Example Request:</h3>

      <pre><code>GET https://resolver.ndadid.vn/1.0/identifiers/did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828</code></pre>

      <p><strong>Response</strong>: On success, the service returns a <code>200 OK</code> with the DID Document (in
        <code>application/ld+json</code> format) as the response body.</p>

      <h3>Resolution error examples:</h3>

      <ul>
        <li><code>404 Not Found</code>: The DID Document for the given DID does not exist in the registry.</li>
        <li><code>400 Bad Request</code>: The DID string is malformed or invalid.</li>
      </ul>

      <h2>7. DID Document</h2>

      <p>When a <code>did:nda</code> is resolved, the resulting DID Document is a JSON-LD object that conforms to the <a
          href="https://www.w3.org/TR/did-core/" target="_blank">W3C DID Core v1.0</a> specification.</p>

      <p>The document includes multiple contexts:</p>

      <ul>
        <li><code>https://www.w3.org/ns/did/v1</code> (DID Core v1.0)</li>
        <li><code>https://w3id.org/security/v1</code> (Security & Cryptography Standards)</li>
      </ul>

      <h3>Example DID Document</h3>

      <pre><code>{
  "@context": [
    "https://www.w3.org/ns/did/v1",
    "https://w3id.org/security/v1"
  ],
  "id": "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828",
  "controller": "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828",
  "verificationMethod": [
    {
      "id": "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828#keys-1",
      "type": "EcdsaSecp256k1VerificationKey2019",
      "controller": "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828",
      "publicKeyHex": "04abf141154b386b0203f7e0e7a1c4e7f805f833b9b3e1f0e8f0c3d8e5f0a2a1a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c"
    }
  ],
  "authentication": [
    "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828#keys-1"
  ],
  "assertionMethod": [
    "did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828#keys-1"
  ]
}</code></pre>

      <h2>8. Governance</h2>

      <ul>
        <li><strong>Authority</strong>: The NDA Chain and the associated Verifiable Data Registry (VDR) are maintained
          by <strong>Vietnam's National Data Center</strong>.</li>
        <li><strong>Maintainer</strong>: The resolution service (<code>resolver.ndadid.vn</code>) is operated and
          maintained by <strong>Vietnam's National Data Center</strong>.</li>
        <li><strong>Process to obtain a DID</strong>: As described in Section 4 (Create), DIDs are generated by users
          via cryptographic key-pair creation. The associated DID Document is published to the VDR via the NDA Resolver
          service API, requiring a signature from the controller.</li>
      </ul>

      <h2>9. Privacy &amp; Security Considerations</h2>

      <h3>Security Considerations</h3>

      <ul>
        <li><strong>Key Management</strong>: The security of the <code>did:nda</code> method is entirely dependent on
          the controller's ability to secure their private key. Private keys should be stored in secure environments,
          such as a Hardware Security Module (HSM) or a device's Secure Element (SE).</li>
        <li><strong>Trust Model</strong>: Trust is rooted in the cryptographic security of the NDA Chain and the
          integrity of the NDA DID Resolver service. Verifiers must trust that the resolver service provides the correct
          DID Document associated with a given DID.</li>
        <li><strong>Authentication</strong>: All update operations on a DID Document MUST be cryptographically signed by
          the key(s) associated with the <code>controller</code> DID, proving ownership.</li>
      </ul>

      <h3>Privacy Considerations</h3>

      <ul>
        <li><strong>Data Minimization (On-Chain)</strong>: The NDA Chain only stores minimal data (DIDs and references).
          No Personally Identifiable Information (PII) is stored on the blockchain.</li>
        <li><strong>Off-Chain Documents</strong>: The DID Document itself is stored off-chain. While it does not contain
          PII, it does contain public keys.</li>
        <li><strong>Selective Disclosure</strong>: PII is only ever contained within Verifiable Credentials (VCs), which
          are held by the user (e.g., in a digital wallet) and are never published to the resolver or the blockchain.
          The user presents VCs and can choose which information to disclose (selective disclosure).</li>
        <li><strong>Pseudonymity</strong>: A <code>did:nda</code> is a pseudonymous identifier. It is not inherently
          linked to a real-world identity unless the holder chooses to link it by, for example, obtaining a VC from an
          issuer that verifies their identity.</li>
      </ul>

      <h2>10. Lifecycle</h2>

      <ul>
        <li><strong>Versioning</strong>: This specification follows Semantic Versioning. Breaking changes will require a
          new version.</li>
        <li><strong>Deprecation/Deactivation</strong>: As described in Section 4.4, DIDs can be deactivated by updating
          their DID Document to remove keys and services. A <code>404 Not Found</code> or a DID Document with no
          verification methods may be returned for a deactivated DID.</li>
      </ul>

      <h2>11. W3C Registration</h2>

      <ul>
        <li>The method is to be published in the <strong>DID Method Registry</strong>.</li>
        <li><strong>Initial status</strong>: provisional.</li>
      </ul>

      <h2>12. Test Vectors</h2>

      <ul>
        <li><strong>Example 1:</strong> <code>did:nda:0xdfc8044a202f08b9c8df2e42f746355575816828</code> → see
          <code>examples/nda-1.json</code> (This implies a valid DID Document file exists at this path in your
          repository).</li>
      </ul>

      <h2>13. References</h2>

      <ul>
        <li><strong>[W3C DID Core v1.0]</strong>: <a href="https://www.w3.org/TR/did-core/"
            target="_blank">https://www.w3.org/TR/did-core/</a></li>
        <li><strong>[W3C DID Resolution]</strong>: <a href="https://www.w3.org/TR/did-resolution/"
            target="_blank">https://www.w3.org/TR/did-resolution/</a></li>
        <li><strong>[W3C Security Vocabulary]</strong>: <a href="https://w3id.org/security/v1"
            target="_blank">https://w3id.org/security/v1</a></li>
        <li><strong>[EcdsaSecp256k1VerificationKey2019]</strong>: <a
            href="https://w3c-ccg.github.io/data-integrity-spec/#EcdsaSecp256k1VerificationKey2019"
            target="_blank">https://w3c-ccg.github.io/data-integrity-spec/#EcdsaSecp256k1VerificationKey2019</a></li>
      </ul>

    </div>
  </main>

  <footer>
    <p>© 2025 Vietnam's National Data Center | DID:NDA Method Specification</p>
  </footer>
</body>

</html>